<!DOCTYPE html>
<html lang="ja">
 <head>
    <meta charset='UTF-8' content='text/html' http-equiv='Content-Type'>
    <meta content='width=device-width, initial-scale=1, shrink-to-fit=no' name='viewport'>
    <meta content='おのかちおの個人サイトです。主に自己紹介と成果物、その他サービスへのリンクを掲載しています。' name='description'>
    <meta content='onokatio' name='auhthor'>
    <meta content='onokatio' name='application-name'>
    <link href='https://cdn.honokak.osaka/honoka/4.3.1/css/bootstrap.min.css' rel='stylesheet'>
    <link href='main.css' rel='stylesheet'>

	<!-- preload -->
	<link rel="preload" href="https://raw.githubusercontent.com/onokatio/blog/master/index.md" as="fetch" crossorigin>
	<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js" as="script" crossorigin>
	<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js" as="script" crossorigin>
	<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js" as="script" crossorigin>
	<!-- /preload -->
    <title>onokatio</title>
  </head>
  <body>
	<div class="container">
			<div id="markdown"></div>
			<hr>
			<a id='gobacklink' style='display:none' href='#/'>Back to top</a>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js" integrity="sha384-KpuxVjTC2hfOkg5KV3jSdx1eA6xy0PGS0wNfDrwf4sZBnZdzlIsnkH+LzLkavmH7" crossorigin="anonymous"></script>

	<script>
		const converter = new showdown.Converter()
		converter.setOption('simplifiedAutoLink','true')
		converter.setOption('strikethrough','true')
		converter.setOption('tables','true')
		converter.setOption('tablesHeaderId','true')
		converter.setOption('tasklists','true')
		converter.setOption('simpleLineBreaks','true')
		converter.setOption('emoji','true')
		converter.setOption('metadata','true')

		const UpdateMarkdown = markdownUrl => {
			document.getElementById("markdown").textContent = 'loading ...'
			const fetchMarkdown = async () => {
				const markdown = await fetch(markdownUrl)
				const json = await markdown.text()
				const html = converter.makeHtml(json)

				document.getElementById("markdown").textContent = ''
				document.getElementById("markdown").insertAdjacentHTML('afterbegin',html)

				document.getElementById('gobacklink').style.display = 'inline'
			}
			fetchMarkdown()
		}

		const hashChangeEvent = () => {
			if (location.hash === ('#/') || location.hash === ('')) {
				UpdateMarkdown('https://raw.githubusercontent.com/onokatio-blog/blog/master/index.md')
			} else if (location.hash.startsWith('#/page/')) {
				UpdateMarkdown('https://raw.githubusercontent.com/onokatio-blog/blog/master/' + location.hash.slice(7) + '.md')
			}
		}
		window.onhashchange = hashChangeEvent

		hashChangeEvent()
	</script>

	<!-- Bootstrap -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
  </body>
</html>
