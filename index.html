<!DOCTYPE html>
<html lang="ja">
 <head>
    <meta charset='UTF-8'>
    <meta content='width=device-width, initial-scale=1, shrink-to-fit=no' name='viewport'>

    <meta name='author' content='@onokatio_'>
    <meta name='application-name' content='おのかちおのブログ'>
    <meta name='description' content='取得に失敗しました'>
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@onokatio_">
    <meta name="twitter:creator" content="@onokatio_">
    <meta property="og:title" content="取得に失敗しました - blog.katio.net">
    <meta property="og:description" content="取得に失敗しました">
    <meta property="og:type" content="artcle">
    <meta property="og:url" content="https://blog.katio.net/">
    <meta property="og:image" content="https://static.katio.net/image/katio.jpg">
    <meta property="og:site_name" content="おのかちおのブログ">
    <meta name="google-site-verification" content="86HJNXgtgHoaF8PlmtzVUIic7r18GLYtEIQZJLt2mN4" />
	<!-- <link href='https://cdn.honokak.osaka/honoka/4.3.1/css/bootstrap.min.css' rel='stylesheet'> -->
	<link href='/bootstrap.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="/highlight/vs2015.css">
    <link rel="stylesheet" href='/main.css'>

	<!-- preload -->
	<script>
		/*
		const preloadLink = document.createElement("link")
		if (location.hash === ('#/') || location.hash === ('')) {
			preloadLink.href = 'https://static.katio.net/markdown/index.md'
		} else {
			preloadLink.href = 'https://static.katio.net/markdown/' + location.hash.slice(7) + '.md'
		}
		preloadLink.as = "fetch"
		preloadLink.setAttribute('crossorigin','anonymous')
		document.head.appendChild(preloadLink)
		*/
	</script>
	<!-- /preload -->
    <title>onokatio</title>
  </head>
  <body>
	<div class="container">
			<p id="markdown"></p>
			<hr>
			<p class="text-right"><a id="editgithub" href="#">Pull Request this page on github</a></p>
			<p class="text-left"><a id='gobacklink' href='/'>Go home</a></p>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.1/marked.min.js" integrity="sha384-EiOGSCEMZcrL0lbddeRRJEF8+qWFNoCH1guk5GrDVcojQEy4XZMchqvucM+f1WCG" crossorigin="anonymous"></script>

	<script>
		const renderer = new marked.Renderer()

		// override image tag rendering function
		renderer.image = function(e, t, n) {
			var r =
				'<img width="100%" src="' + e + '" alt="' + n + '"';
			return t && (r += ' title="' + t + '"'), r += ">"
		}

		const smoothJump = (event) => {
			event.preventDefault()
			event.stopPropagation()
			history.pushState(null, null, event.target.pathname)
			UpdateDomFromUrl()
			return false;
		}

		/*
		const hashChangeEvent = () => {
			if (location.pathname === "/" && location.hash.startsWith('#/page/')) {
				filename = location.hash.slice(7)
				location.href = "/page/" + filename
			}
		}
		*/


		const UpdateDomFromUrl = () => {
			// get url path and rewrite dom directly. If it doesn't match any rule, return 404 pages.
			pathname = location.pathname
			if ( pathname.startsWith('/page/') ) {
				filename = '/markdown/' + location.pathname.slice(6) + '.md'
				if ( ! filename.match( /^[a-zA-Z0-9-0_\.\-\/]+$/ ) ) filename = '/markdown/404.md'
			} else if ( pathname === '/') {
				filename = '/markdown/index.md'
			} else {
				filename = '/markdown/404.md'
			}

			document.getElementById("editgithub").setAttribute("href",
				"https://github.com/onokatio-blog/blog/blob/master/" + filename)
			document.getElementById("markdown").textContent = 'loading ...'

			// handle 404 from fetch
			fetch('https://static.katio.net/' + filename)
				.then( (markdown) => markdown.text() )
				.then ( (text) => {
					html = marked(text, { renderer: renderer })
					document.getElementById("markdown").textContent = ''
					document.getElementById("markdown").insertAdjacentHTML('afterbegin',html)
				}) .then( () => {
					document.title = document.getElementById('markdown').childNodes[0].innerText + '- blog.katio.net'
					Array.prototype.forEach.call(document.getElementById('markdown').getElementsByTagName('a'), (element) => {
						if( element.pathname.startsWith('/page/') || element.pathname === '/'){
							element.addEventListener('click', smoothJump )
						}
					})
				})

		}

		goback = document.getElementById('gobacklink').addEventListener('click', smoothJump )

		//window.onhashchange = hashChangeEvent
		window.onpopstate = UpdateDomFromUrl

		UpdateDomFromUrl()

	</script>

	<!-- Bootstrap -->
	<!--
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous" defer></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous" defer></script>
	-->
	<script src="highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
